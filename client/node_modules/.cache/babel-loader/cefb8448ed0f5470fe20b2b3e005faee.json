{"ast":null,"code":"import _slicedToArray from \"/Users/lukas/Documents/GitHub/spotify-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/lukas/Documents/GitHub/spotify-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/lukas/Documents/GitHub/spotify-app/src/pages/dashboard/index.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  query TracksQuery($selectedGenres: [String!]!) {\\n    tracks(selectedGenres: $selectedGenres) {\\n      id\\n      name\\n      artists {\\n        name\\n      }\\n      preview_url\\n      album {\\n        images {\\n          url\\n        }\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, Fragment } from \"react\";\nimport gql from \"graphql-tag\";\nimport { Query } from \"react-apollo\";\nimport { Card } from \"./card/Card\";\nimport { Button } from \"../../components/button\";\nimport \"../../Shared.css\";\nimport \"./Dashboard.css\";\nconst TRACKS_QUERY = gql(_templateObject());\n\nconst Dashboard = props => {\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        currentIndex = _useState2[0],\n        updateIndex = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        frontImageIndex = _useState4[0],\n        updateFrontImageIndex = _useState4[1];\n\n  const _useState5 = useState(1),\n        _useState6 = _slicedToArray(_useState5, 2),\n        backImageIndex = _useState6[0],\n        updateBackImageIndex = _useState6[1];\n\n  const nextSong = () => {\n    updateIndex(currentIndex + 1);\n    document.querySelector(\".dashboard__video\").load();\n  };\n\n  const previousSong = () => {\n    updateIndex(currentIndex - 1);\n    document.querySelector(\".dashboard__video\").load();\n  };\n\n  const determineUpdateAction = next => {\n    console.log(\"FRONT\", frontImageIndex);\n    console.log(\"BACK\", backImageIndex);\n\n    if (next) {\n      if (currentIndex % 2 === 0) {\n        updateFrontImageIndex(frontImageIndex + 2);\n      } else {\n        updateBackImageIndex(backImageIndex + 2);\n      }\n    } else {\n      console.log(\"here\");\n\n      if (currentIndex % 2 === 0) {\n        updateFrontImageIndex(frontImageIndex - 2);\n      } else {\n        updateBackImageIndex(backImageIndex - 2);\n      }\n    }\n  };\n\n  const renderArtists = arr => {\n    return arr.map((artist, index) => {\n      if (index === arr.length - 1) return artist.name;\n      return artist.name + \", \";\n    });\n  };\n\n  console.log(\"props\", props.location.state);\n  return React.createElement(\"div\", {\n    className: \"d-flex justify-content-center align-items-center h-100 flex-column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Query, {\n    query: TRACKS_QUERY,\n    variables: {\n      selectedGenres: props.location.state\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, ({\n    loading,\n    error,\n    data\n  }) => {\n    if (loading) return React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"LOADING...\");\n    if (error) console.log(\"error\", error);else {\n      console.log(\"DATA\", data);\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Card, {\n        nextSong: () => nextSong(),\n        previousSong: () => previousSong(),\n        frontImage: data.tracks[frontImageIndex].album.images.url,\n        backImage: data.tracks[backImageIndex].album.images.url,\n        updateImage: next => determineUpdateAction(next),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"dashboard__heading-wrapper mb-2 mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"heading__primary m-1 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, data.tracks[currentIndex].name), React.createElement(\"div\", {\n        className: \"heading__secondary mt-2 text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, renderArtists(data.tracks[currentIndex].artists)), React.createElement(\"video\", {\n        className: \"dashboard__video\",\n        controls: true,\n        name: \"media\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"source\", {\n        src: \"\".concat(data.tracks[currentIndex].preview_url),\n        type: \"audio/mpeg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        type: \"primary\",\n        title: \"Add to playlist\",\n        action: () => {},\n        fill: \"rgb(255, 78, 80)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }));\n    }\n  }));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/lukas/Documents/GitHub/spotify-app/src/pages/dashboard/index.js"],"names":["React","useState","Fragment","gql","Query","Card","Button","TRACKS_QUERY","Dashboard","props","currentIndex","updateIndex","frontImageIndex","updateFrontImageIndex","backImageIndex","updateBackImageIndex","nextSong","document","querySelector","load","previousSong","determineUpdateAction","next","console","log","renderArtists","arr","map","artist","index","length","name","location","state","selectedGenres","loading","error","data","tracks","album","images","url","artists","preview_url"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,QAA0C,OAA1C;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,KAAT,QAAsB,cAAtB;AACA,SAASC,IAAT,QAAqB,aAArB;AACA,SAASC,MAAT,QAAuB,yBAAvB;AACA,OAAO,kBAAP;AACA,OAAO,iBAAP;AAEA,MAAMC,YAAY,GAAGJ,GAAH,mBAAlB;;AAkBA,MAAMK,SAAS,GAAGC,KAAK,IAAI;AAAA,oBACWR,QAAQ,CAAC,CAAD,CADnB;AAAA;AAAA,QAClBS,YADkB;AAAA,QACJC,WADI;;AAAA,qBAEwBV,QAAQ,CAAC,CAAD,CAFhC;AAAA;AAAA,QAElBW,eAFkB;AAAA,QAEDC,qBAFC;;AAAA,qBAGsBZ,QAAQ,CAAC,CAAD,CAH9B;AAAA;AAAA,QAGlBa,cAHkB;AAAA,QAGFC,oBAHE;;AAKzB,QAAMC,QAAQ,GAAG,MAAM;AACrBL,IAAAA,WAAW,CAACD,YAAY,GAAG,CAAhB,CAAX;AACAO,IAAAA,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,EAA4CC,IAA5C;AACD,GAHD;;AAKA,QAAMC,YAAY,GAAG,MAAM;AACzBT,IAAAA,WAAW,CAACD,YAAY,GAAG,CAAhB,CAAX;AACAO,IAAAA,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,EAA4CC,IAA5C;AACD,GAHD;;AAKA,QAAME,qBAAqB,GAAGC,IAAI,IAAI;AACpCC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBZ,eAArB;AACAW,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBV,cAApB;;AACA,QAAIQ,IAAJ,EAAU;AACR,UAAIZ,YAAY,GAAG,CAAf,KAAqB,CAAzB,EAA4B;AAC1BG,QAAAA,qBAAqB,CAACD,eAAe,GAAG,CAAnB,CAArB;AACD,OAFD,MAEO;AACLG,QAAAA,oBAAoB,CAACD,cAAc,GAAG,CAAlB,CAApB;AACD;AACF,KAND,MAMO;AACLS,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,UAAId,YAAY,GAAG,CAAf,KAAqB,CAAzB,EAA4B;AAC1BG,QAAAA,qBAAqB,CAACD,eAAe,GAAG,CAAnB,CAArB;AACD,OAFD,MAEO;AACLG,QAAAA,oBAAoB,CAACD,cAAc,GAAG,CAAlB,CAApB;AACD;AAEF;AACF,GAlBD;;AAoBA,QAAMW,aAAa,GAAGC,GAAG,IAAI;AAC3B,WAAOA,GAAG,CAACC,GAAJ,CAAQ,CAACC,MAAD,EAASC,KAAT,KAAmB;AAChC,UAAIA,KAAK,KAAKH,GAAG,CAACI,MAAJ,GAAa,CAA3B,EAA8B,OAAOF,MAAM,CAACG,IAAd;AAC9B,aAAOH,MAAM,CAACG,IAAP,GAAc,IAArB;AACD,KAHM,CAAP;AAID,GALD;;AAOAR,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBf,KAAK,CAACuB,QAAN,CAAeC,KAApC;AACA,SACE;AAAK,IAAA,SAAS,EAAC,oEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AACE,IAAA,KAAK,EAAE1B,YADT;AAEE,IAAA,SAAS,EAAE;AAAE2B,MAAAA,cAAc,EAAEzB,KAAK,CAACuB,QAAN,CAAeC;AAAjC,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIG,CAAC;AAAEE,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,GAAD,KAA8B;AAC7B,QAAIF,OAAJ,EAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACb,QAAIC,KAAJ,EAAWb,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBY,KAArB,EAAX,KACK;AACHb,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBa,IAApB;AACA,aACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AACE,QAAA,QAAQ,EAAE,MAAMrB,QAAQ,EAD1B;AAEE,QAAA,YAAY,EAAE,MAAMI,YAAY,EAFlC;AAGE,QAAA,UAAU,EAAEiB,IAAI,CAACC,MAAL,CAAY1B,eAAZ,EAA6B2B,KAA7B,CAAmCC,MAAnC,CAA0CC,GAHxD;AAIE,QAAA,SAAS,EAAEJ,IAAI,CAACC,MAAL,CAAYxB,cAAZ,EAA4ByB,KAA5B,CAAkCC,MAAlC,CAAyCC,GAJtD;AAKE,QAAA,WAAW,EAAEnB,IAAI,IAAID,qBAAqB,CAACC,IAAD,CAL5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAQE;AAAK,QAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGe,IAAI,CAACC,MAAL,CAAY5B,YAAZ,EAA0BqB,IAD7B,CADF,EAIE;AAAK,QAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGN,aAAa,CAACY,IAAI,CAACC,MAAL,CAAY5B,YAAZ,EAA0BgC,OAA3B,CADhB,CAJF,EAOE;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,QAAQ,MAA5C;AAA6C,QAAA,IAAI,EAAC,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,GAAG,YAAKL,IAAI,CAACC,MAAL,CAAY5B,YAAZ,EAA0BiC,WAA/B,CADL;AAEE,QAAA,IAAI,EAAC,YAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAPF,CARF,EAuBE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,SADR;AAEE,QAAA,KAAK,EAAE,iBAFT;AAGE,QAAA,MAAM,EAAE,MAAM,CAAE,CAHlB;AAIE,QAAA,IAAI,EAAE,kBAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAvBF,CADF;AAgCD;AACF,GA1CH,CADF,CADF;AAgDD,CA3FD;;AA6FA,eAAenC,SAAf","sourcesContent":["import React, { useState, Fragment } from \"react\";\nimport gql from \"graphql-tag\";\nimport { Query } from \"react-apollo\";\nimport { Card } from \"./card/Card\";\nimport { Button } from \"../../components/button\";\nimport \"../../Shared.css\";\nimport \"./Dashboard.css\";\n\nconst TRACKS_QUERY = gql`\n  query TracksQuery($selectedGenres: [String!]!) {\n    tracks(selectedGenres: $selectedGenres) {\n      id\n      name\n      artists {\n        name\n      }\n      preview_url\n      album {\n        images {\n          url\n        }\n      }\n    }\n  }\n`;\n\nconst Dashboard = props => {\n  const [currentIndex, updateIndex] = useState(0);\n  const [frontImageIndex, updateFrontImageIndex] = useState(0);\n  const [backImageIndex, updateBackImageIndex] = useState(1);\n\n  const nextSong = () => {\n    updateIndex(currentIndex + 1);\n    document.querySelector(\".dashboard__video\").load();\n  };\n\n  const previousSong = () => {\n    updateIndex(currentIndex - 1);\n    document.querySelector(\".dashboard__video\").load();\n  };\n\n  const determineUpdateAction = next => {\n    console.log(\"FRONT\", frontImageIndex);\n    console.log(\"BACK\", backImageIndex);\n    if (next) {\n      if (currentIndex % 2 === 0) {\n        updateFrontImageIndex(frontImageIndex + 2);\n      } else {\n        updateBackImageIndex(backImageIndex + 2);\n      }\n    } else {\n      console.log(\"here\");\n      if (currentIndex % 2 === 0) {\n        updateFrontImageIndex(frontImageIndex - 2);\n      } else {\n        updateBackImageIndex(backImageIndex - 2);\n      }\n\n    }\n  };\n\n  const renderArtists = arr => {\n    return arr.map((artist, index) => {\n      if (index === arr.length - 1) return artist.name;\n      return artist.name + \", \";\n    });\n  };\n\n  console.log(\"props\", props.location.state);\n  return (\n    <div className=\"d-flex justify-content-center align-items-center h-100 flex-column\">\n      <Query\n        query={TRACKS_QUERY}\n        variables={{ selectedGenres: props.location.state }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return <h4>LOADING...</h4>;\n          if (error) console.log(\"error\", error);\n          else {\n            console.log(\"DATA\", data);\n            return (\n              <Fragment>\n                <Card\n                  nextSong={() => nextSong()}\n                  previousSong={() => previousSong()}\n                  frontImage={data.tracks[frontImageIndex].album.images.url}\n                  backImage={data.tracks[backImageIndex].album.images.url}\n                  updateImage={next => determineUpdateAction(next)}\n                />\n                <div className=\"dashboard__heading-wrapper mb-2 mt-2\">\n                  <div className=\"heading__primary m-1 text-center\">\n                    {data.tracks[currentIndex].name}\n                  </div>\n                  <div className=\"heading__secondary mt-2 text-white\">\n                    {renderArtists(data.tracks[currentIndex].artists)}\n                  </div>\n                  <video className=\"dashboard__video\" controls name=\"media\">\n                    <source\n                      src={`${data.tracks[currentIndex].preview_url}`}\n                      type=\"audio/mpeg\"\n                    />\n                  </video>\n                </div>\n\n                <Button\n                  type={\"primary\"}\n                  title={\"Add to playlist\"}\n                  action={() => {}}\n                  fill={\"rgb(255, 78, 80)\"}\n                />\n              </Fragment>\n            );\n          }\n        }}\n      </Query>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}